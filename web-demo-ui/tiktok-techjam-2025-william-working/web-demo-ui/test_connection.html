<!DOCTYPE html>
<html>
<head>
    <title>Connection Test</title>
</head>
<body>
    <h1>Testing Connections...</h1>
    <div id="status"></div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        const statusDiv = document.getElementById('status');
        
        function log(message) {
            console.log(message);
            statusDiv.innerHTML += '<div>' + message + '</div>';
        }

        // Test backend connection
        log('Testing backend connection...');
        fetch('http://localhost:5000/health')
            .then(response => response.json())
            .then(data => {
                log('✅ Backend health check: ' + JSON.stringify(data));
                
                // Test socket connection
                log('Testing socket connection...');
                const socket = io('http://localhost:5000');
                
                socket.on('connect', () => {
                    log('✅ Socket connected to backend');
                });
                
                socket.on('connected', (data) => {
                    log('✅ Got connected event: ' + JSON.stringify(data));
                });
                
                socket.on('connect_error', (error) => {
                    log('❌ Socket connection error: ' + error);
                });
                
            })
            .catch(error => {
                log('❌ Backend fetch error: ' + error);
            });

        // Test MediaSoup connection
        log('Testing MediaSoup connection...');
        fetch('http://localhost:3001/health')
            .then(response => response.json())
            .then(data => {
                log('✅ MediaSoup health check: ' + JSON.stringify(data));
            })
            .catch(error => {
                log('❌ MediaSoup fetch error: ' + error);
            });

        // Test Video Filter API
        log('Testing Video Filter API...');
        fetch('http://localhost:5001/health')
            .then(response => response.json())
            .then(data => {
                log('✅ Video Filter API health check: ' + JSON.stringify(data));
            })
            .catch(error => {
                log('❌ Video Filter API fetch error: ' + error);
            });
    </script>
</body>
</html>